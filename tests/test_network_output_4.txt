============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-8.3.4, pluggy-1.5.0 -- C:\ProgramData\anaconda3\python.exe
cachedir: .pytest_cache
rootdir: d:\VS_Code\dev-newtutils
configfile: pyproject.toml
plugins: anyio-4.7.0
collecting ... collected 21 items

test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_success 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_success
--------------------------------------------
Full URL: https://example.com
Status: 200 | Response time: 0.000 seconds
result: Lorem ipsum dolor sit ame

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_with_params 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_with_params
--------------------------------------------
Full URL: https://example.com?key=value
Status: 200 | Response time: 0.000 seconds
result: Lorem ipsum dolor sit ame
call_kwargs: {'params': {'key': 'value', 'num': '123'}, 'headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36'}, 'timeout': 45}

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_with_custom_headers 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_with_custom_headers
--------------------------------------------
Full URL: https://example.com
Status: 200 | Response time: 0.000 seconds
result: Lorem ipsum dolor sit ame
call_kwargs: {'params': None, 'headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Authorization': 'Bearer token'}, 'timeout': 45}

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_status_206 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_status_206
--------------------------------------------
Full URL: https://example.com
Status: 206 | Response time: 0.000 seconds
result: Partial Lorem ipsum dolor sit ame

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_status_404 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_status_404
--------------------------------------------
Full URL: https://example.com/notfound
Status: 404 | Response time: 0.000 seconds
[1m [31m
Location: Newt.network.fetch_data_from_url
::: ERROR :::
HTTP 404 for https://example.com/notfound
[0m
result: None

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_status_500 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_status_500
--------------------------------------------
Full URL: https://example.com
Status: 500 | Response time: 0.000 seconds
[1m [31m
Location: Newt.network.fetch_data_from_url
::: ERROR :::
HTTP 500 for https://example.com
[0m

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_timeout 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_timeout
--------------------------------------------
[1m [31m
Location: Newt.network.fetch_data_from_url
::: ERROR :::
ReadTimeout: Timeout
Timeout (45s) for https://example.com
Request failed after 0.00s
[0m
result: None

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_request_exception 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_request_exception
--------------------------------------------
[1m [31m
Location: Newt.network.fetch_data_from_url
::: ERROR :::
Request failed after 0.00s
RequestException: Connection error
[0m
result: None

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_retry_on_fail 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_retry_on_fail
--------------------------------------------
Full URL: https://example.com
Status: 500 | Response time: 0.000 seconds
[1m [31m
Location: Newt.network.fetch_data_from_url
::: ERROR :::
HTTP 500 for https://example.com
[0m
Full URL: https://example.com
Status: 200 | Response time: 0.000 seconds
result: Success
mock_retry: 1

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_custom_timeout 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_custom_timeout
--------------------------------------------
Full URL: https://example.com
Status: 200 | Response time: 0.000 seconds
result: Lorem ipsum dolor sit ame
call_kwargs: {'params': None, 'headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36'}, 'timeout': 60}

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_invalid_input 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_invalid_input
--------------------------------------------
[1m [31m
Location: Newt.console.validate_input > Newt.network.fetch_data_from_url.base_url
::: ERROR :::
Expected <class 'str'>, got <class 'int'>
Value: 123
[0m

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestFetchDataFromUrl::test_fetch_data_from_url_mode_alert 
START=======================================
=====captured.out=====
Function: test_fetch_data_from_url_mode_alert
--------------------------------------------
Full URL: https://example.com
Status: 500 | Response time: 0.000 seconds
[1m [31m
Location: Newt.network.fetch_data_from_url
::: ERROR :::
HTTP 500 for https://example.com
[0m
result: None
mock_beep: 1

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestDownloadFileFromUrl::test_download_file_from_url_text 
START=======================================
=====captured.out=====
Function: test_download_file_from_url_text
--------------------------------------------
Downloading from: https://example.com/file.txt
Status: 200
Content-Type: text/plain
Saved to: tmp_file.txt
result: True
mock_save: 1
mock_get: 1

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestDownloadFileFromUrl::test_download_file_from_url_binary 
START=======================================
=====captured.out=====
Function: test_download_file_from_url_binary
--------------------------------------------
Downloading from: https://example.com/file.bin
Status: 200
Content-Type: application/octet-stream
Saved to: tmp_file.bin
result: True
mock_open: 1
mock_get: 1

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestDownloadFileFromUrl::test_download_file_from_url_status_404 
START=======================================
=====captured.out=====
Function: test_download_file_from_url_status_404
--------------------------------------------
Downloading from: https://example.com/file.txt
Status: 404
[1m [31m
Location: Newt.network.download_file_from_url
::: ERROR :::
HTTP 404 while downloading https://example.com/file.txt
[0m
result: False
mock_get: 1

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestDownloadFileFromUrl::test_download_file_from_url_timeout 
START=======================================
=====captured.out=====
Function: test_download_file_from_url_timeout
--------------------------------------------
[1m [31m
Location: Newt.network.download_file_from_url
::: ERROR :::
ReadTimeout: Timeout
Timeout (60s) while downloading https://example.com/file.txt
[0m
result: False
mock_get: 1

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestDownloadFileFromUrl::test_download_file_from_url_request_exception 
START=======================================
=====captured.out=====
Function: test_download_file_from_url_request_exception
--------------------------------------------
[1m [31m
Location: Newt.network.download_file_from_url
::: ERROR :::
RequestException: Error
[0m
result: False
mock_get: 1

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestDownloadFileFromUrl::test_download_file_from_url_retry 
START=======================================
=====captured.out=====
Function: test_download_file_from_url_retry
--------------------------------------------
Downloading from: https://example.com/file.txt
Status: 500
[1m [31m
Location: Newt.network.download_file_from_url
::: ERROR :::
HTTP 500 while downloading https://example.com/file.txt
[0m
Downloading from: https://example.com/file.txt
Status: 200
Content-Type: text/plain
Saved to: tmp_file.txt
result: True
mock_save: 1
mock_retry: 1
mock_get: 2

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestDownloadFileFromUrl::test_download_file_from_url_invalid_input 
START=======================================
=====captured.out=====
Function: test_download_file_from_url_invalid_input
--------------------------------------------
[1m [31m
Location: Newt.console.validate_input > Newt.network.download_file_from_url.file_url
::: ERROR :::
Expected <class 'str'>, got <class 'int'>
Value: 123
[0m
[1m [31m
Location: Newt.console.validate_input > Newt.network.download_file_from_url.save_path
::: ERROR :::
Expected <class 'str'>, got <class 'int'>
Value: 456
[0m

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestDownloadFileFromUrl::test_download_file_from_url_json_content_type 
START=======================================
=====captured.out=====
Function: test_download_file_from_url_json_content_type
--------------------------------------------
Downloading from: https://example.com/data.json
Status: 200
Content-Type: application/json
Saved to: tmp_data.json
result: True
mock_save: 1
mock_get: 1

=====captured.err=====
(no stderr captured)
END=========================================
PASSED
test_network.py::TestDownloadFileFromUrl::test_download_file_from_url_custom_headers 
START=======================================
=====captured.out=====
Function: test_download_file_from_url_custom_headers
--------------------------------------------
Downloading from: https://example.com/file.bin
Status: 200
Content-Type: application/octet-stream
Saved to: tmp_file.bin
result: True
call_kwargs: {'headers': {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36', 'Authorization': 'Bearer token'}, 'timeout': 60}
mock_get: 1

=====captured.err=====
(no stderr captured)
END=========================================
PASSED

============================= 21 passed in 0.43s ==============================
